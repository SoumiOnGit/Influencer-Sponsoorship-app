{% extends "base.html" %}

{% block content %}
<div class="register-page">
    <h2>Register</h2>
    <form action="{{ url_for('register') }}" method="post">
        <div class="form-group">
            <label for="user_type">Register as:</label>
            <select id="user_type" name="user_type" required>
                <option value="influencer">Influencer</option>
                <option value="sponsor">Sponsor</option>
                <option value="admin">Admin</option>
            </select>
        </div>
        <div class="form-group">
            <label for="username">Username:</label>
            <input type="text" id="username" name="username" required>
        </div>
        <div class="form-group">
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" required>
        </div>
        <div class="form-group">
            <label for="password">Password:</label>
            <input type="password" id="password" name="password" required>
        </div>
        <div class="form-group">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>
        </div>
        <div id="additional-fields"></div>
        <button type="submit">Register</button>
    </form>
    <script>
        document.getElementById('user_type').addEventListener('change', function() {
            var userType = this.value;
            var additionalFields = document.getElementById('additional-fields');
            additionalFields.innerHTML = '';

            if (userType === 'influencer') {
                additionalFields.innerHTML = `
                    <div class="form-group">
                        <label for="followers">Followers:</label>
                        <input type="number" id="followers" name="followers" required>
                    </div>
                    <div class="form-group">
                        <label for="niche">Niche:</label>
                        <input type="text" id="niche" name="niche" required>
                    </div>
                    <div class="form-group">
                        <label for="reach">Reach:</label>
                        <input type="number" id="reach" name="reach" required>
                    </div>
                `;
            } else if (userType === 'sponsor') {
                additionalFields.innerHTML = `
                    <div class="form-group">
                        <label for="companyname">Company Name:</label>
                        <input type="text" id="companyname" name="companyname" required>
                    </div>
                `;
            }
        });

        // Trigger change event on page load to display the correct fields for the default selection
        document.getElementById('user_type').dispatchEvent(new Event('change'));
    </script>
</div>
{% endblock %}
